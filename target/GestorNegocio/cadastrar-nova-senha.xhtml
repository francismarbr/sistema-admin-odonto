<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:o="http://omnifaces.org/ui"
      xmlns:p="http://primefaces.org/ui">

	<h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <h:outputStylesheet library="css" name="custom.css" />
        <h:outputStylesheet library="css" name="sistema.css" />
	</h:head>

	<h:body>
	
		<f:metadata>
			<o:viewParam name="token" value="#{CRecuperarSenha.tokenUrl}" />
		</f:metadata>
			
		<div id="login-dialog" class="grid-login">
			<div class="ui-fluid">
			<div style="text-align:center;"> 
				<h:graphicImage library="images" name="logo-admin-odonto.png" />
				<h2> #{CRecuperarSenha.alterarSenha ? 'Cadastre Sua Nova Senha' : 'Solicitação Inválida'} </h2>
			</div> 
			
				<h:form id="frm" prependId="false">
					
					<p:messages id="messages" autoUpdate="true" closable="true" />
					
					<p:panelGrid columns="1" layout="grid" >
						
						<p:password feedback="true" weakLabel="Fraca" goodLabel="Boa" strongLabel="Forte" size="30" id="username" value="#{CRecuperarSenha.novaSenha}" promptLabel="Digite sua nova senha" rendered="#{CRecuperarSenha.solicitacaoValida}" />
						
												
						<h:panelGroup />
						<p:commandButton value="Recuperar Senha" action="#{CRecuperarSenha.salvarNovaSenha}" rendered="#{CRecuperarSenha.solicitacaoValida}" update="frm, novaSolicitacao, fazerLogin"/>
						
					</p:panelGrid>
					
				</h:form>
				<br />
				<div style="text-align:center">
					<h:link id="novaSolicitacao" outcome="/recuperar-senha.xhtml" rendered="#{not CRecuperarSenha.solicitacaoValida}">Solicitar Nova Alteração</h:link>
					<h:link id="fazerLogin" outcome="/login.xhtml" rendered="#{CRecuperarSenha.solicitacaoValida}">Fazer Login</h:link>
				</div>
			</div>
		</div>
	</h:body>
</html>